# Recurso de usuario

Próximamente...

Tenemos nuestra nueva entidad user en, pero aún no forma parte de nuestra api. ¿Cómo hacemos que forme parte de nuestra api? Ah, ya sabemos que es super sencillo. Ve encima de la clase y añade el atributo de recurso API. Actualiza la documentación. Fíjate. Seis nuevas rutas para nuestra entidad de usuario. Gracias a nuestros fixtures, deberíamos poder ver los datos inmediatamente. Voy a intentar obtener la ruta de recogida y mirarla. Está vivo. No. Es un poco raro que cosas como rollos y contraseñas aparezcan dentro de aquí. Nos preocuparemos de eso en un segundo. Rápidamente, quiero decir una cosa rápida sobre los ID UU. Como puedes ver, estamos utilizando IDs autoincrementados dentro de nuestra api, pero puedes utilizar un UU ID en su lugar. Y de eso hablaremos en un tutorial futuro. ¿Por qué utilizar ID UU? Bueno, a veces puede hacerte la vida más fácil en JavaScript. En JavaScript puedes, de hecho, generar el UU i d en JavaScript y luego enviarlo a tu api. A veces eso te hace la vida más fácil en JavaScript porque sabes cuál es el ID de ese recurso inmediatamente, en lugar de tener que hacer la petición de la edad X, esperar a que termine y luego obtener de vuelta el nuevo ID autoincrementado de todos modos. API Platform sí suministra, sí admite UID UU. Hay una forma de que añadas una nueva columna U I UU ID aquí y le digas a API Platform que ése es tu identificador.

Si lo haces, una advertencia: en algunos motores de bases de datos, los UU ID no son una buena clave primaria para el rendimiento. Así que tal vez quieras mantener el id pero tener un segundo UU i d, que es lo que en realidad utiliza una plataforma APAP, pero eso depende de cuál sea tu motor de base de datos. De todos modos, volviendo a nuestra entidad de usuario, está devolviendo demasiados campos y conocemos ese problema. Sabemos cómo solucionar ese problema en el recurso API, vamos a añadir una clave de contexto de normalización con grupos. Establecer dos puntos de usuario leer para seguir ese mismo patrón que utilizamos en Dragon Treasure y luego DN normalización contacto establecer dos puntos de usuario. Ahora sólo podemos decorar los campos que realmente queremos devolver. Así que no necesitamos devolver el ID porque siempre tenemos el at id, que es más útil de todos modos, pero sí queremos devolver el correo electrónico, así que añadiré un atributo de grupo ahí, pulsaré tabulador y obtendremos esa declaración de uso pass y right, y tendremos user calling read. Y esto también es escribir también usuario llamando y Wright.

Ahora copia eso. Bajemos aquí. Contraseña, necesitamos que la contraseña sea escribible pero no legible. Así que voy a usar los dos puntos de usuario justo aquí. Ahora bien, esto todavía no es del todo correcto. El campo de la contraseña debe ser la contraseña cifrada y en realidad no queremos que nuestros usuarios nos envíen una contraseña cifrada. Lo que queremos es que nos envíen una contraseña sin formato y luego la convertimos en hash. Eso es algo que resolveremos en un futuro tutorial cuando hablemos más sobre el objeto usuario. Pero esto será un comienzo suficientemente bueno por ahora. Por encima de nombre de usuario. Añadamos también usuario lectura y usuario escritura sobre eso. Cool, así que vamos a refrescar y hermoso y probar nuestros puntos finales y hermoso correo electrónico y nombre de usuario volver. Y si fuéramos a crear un nuevo usuario, lo hacemos pasando email, nombre de usuario y contraseña. Muy bien, ¿qué más nos falta? ¿Qué hay de las restricciones de validación? Si ahora mismo probamos nuestra ruta vacía, obtenemos ese desagradable aire 500. Así que vamos a arreglarlo en una clase. En realidad voy a empezar por encima de la clase asegurándome de que el correo electrónico y el nombre de usuario son únicos para que podamos pasar la entidad única

Por encima pasaremos los campos y haremos primero el email. Y si quieres, puedes pasar un mensaje a esto. Precioso. Y luego vamos a repetir lo mismo para el campo nombre de usuario. Así que actualiza el campo y también el mensaje. Muy bien, luego aquí abajo para el correo electrónico, vamos a querer que no esté en blanco. Permíteme poner la afirmación delante de eso y sólo ajustaré la afirmación tú como la última vez. Muy bien. Y luego una más, también podemos PA puede pasar esto, las restricciones de correo electrónico, por lo que la dirección de correo electrónico válida. Y luego lo único que necesitamos ahora es justo encima de nombre de usuario. Añadiremos un espacio en blanco. No me preocupa demasiado la contraseña ahora mismo porque es un poco rara. De todas formas. Muy bien, pues ahora si probamos cosas, déjame de hecho, pasemos sólo contraseña y hermoso código de estado 4 22 y vemos los errores de validación. Muy bien, entonces vamos a probar una cosa válida. Pon una dirección de correo electrónico el nombre de usuario y el nombre de usuario. No, no creo que este tipo sea realmente un dragón. Creo que, creo que puede ser otra persona después de que el tesoro del dragón se ejecute. Entendido. código de estado 2 0 1. Se devuelve el correo electrónico y el nombre de usuario. Así que esto es genial.

Tenemos nuestro nuevo recurso de usuario en la api. Tiene estas seis operaciones. Tenemos la validación Page Nation, si quisiéramos, podríamos añadirle filtrado. Lo estamos machacando. Ahora llegamos a la parte realmente interesante. Tenemos que relacionar nuestros dos recursos para que cada tesoro pertenezca a un usuario. ¿Qué aspecto tiene eso en una API Platform? Es superinteresante y eso a continuación.
